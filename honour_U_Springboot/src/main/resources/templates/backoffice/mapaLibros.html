<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Mapa de Libros por País</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <style>
        #map { height: 600px; width: 100%; }
    </style>
</head>
<body>

<h1>Mapa de Libros por País</h1>
<div id="map"></div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script th:inline="javascript">

    // Objeto que Thymeleaf sustituirá con los datos reales del backend
    var librosPorPais = /*[[${librosPorPais}]]*/ {};

    // Inicializamos el mapa centrado en Europa
    var map = L.map('map').setView([51.505, -0.09], 3);

    // Añadimos capa base de OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
    }).addTo(map);

    // Coordenadas de países (latitud, longitud)
    const coordenadasPaises = {
        "España": [40.4168, -3.7038],
        "Francia": [48.8566, 2.3522],
        "Alemania": [52.5200, 13.4050],
        "Italia": [41.9028, 12.4964],
        "Portugal": [38.7223, -9.1393],
        "Reino Unido": [51.5074, -0.1278],
        "Países Bajos": [52.3676, 4.9041],
        "Bélgica": [50.8503, 4.3517],
        "Suiza": [46.9481, 7.4474],
        "Austria": [48.2082, 16.3738],
        "Suecia": [59.3293, 18.0686],
        "Noruega": [59.9139, 10.7522],
        "Finlandia": [60.1695, 24.9354],
        "Dinamarca": [55.6761, 12.5683],
        "Irlanda": [53.3498, -6.2603],
        "Polonia": [52.2297, 21.0122],
        "Hungría": [47.4979, 19.0402],
        "Grecia": [37.9838, 23.7275],
        "Rusia": [55.7558, 37.6173],
        "Turquía": [39.9334, 32.8597],
        "Islandia": [64.1355, -21.8954],
        "Liechtenstein": [47.1660, 9.5554],
        "Luxemburgo": [49.6117, 6.1319],
        "San Marino": [43.9336, 12.4483],
        "Mónaco": [43.7384, 7.4246],
        "Andorra": [42.5063, 1.5218],
        "Malta": [35.8997, 14.5146],
        "Eslovenia": [46.0569, 14.5058],
        "Eslovaquia": [48.1486, 17.1077],
        "Croacia": [45.8150, 15.9819],
        "Bulgaria": [42.6977, 23.3219],
        "Rumania": [44.4268, 26.1025],
        "Serbia": [44.8176, 20.4569],
        "Montenegro": [42.4410, 19.2620],
        "Bosnia y Herzegovina": [43.8563, 18.4131],
        "Kosovo": [42.6629, 21.1655],
        "Ucrania": [50.4501, 30.5234],
        "Belarús": [53.9006, 27.5590],
        "Letonia": [56.9496, 24.1052],
        "Lituania": [54.6872, 25.2797],
        "Estonia": [59.4370, 24.7536],
        "Chipre": [35.1856, 33.3823]

    };

    // Añadir marcadores para cada país con libros
    for (const pais in librosPorPais) {
        if (coordenadasPaises[pais]) {
            const coords = coordenadasPaises[pais];
            const cantidadLibros = librosPorPais[pais];

            L.marker(coords).addTo(map)
                .bindPopup(`<b>${pais}</b><br>Libros: ${cantidadLibros}`);
        } else {
            console.warn(`Coordenadas no encontradas para el país: ${pais}`);
        }
    }

</script>

</body>
</html>
