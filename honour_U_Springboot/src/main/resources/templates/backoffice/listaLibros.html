<!DOCTYPE html>
<html lang="es"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">

<head>
    <title>Gestionar Libro</title>
</head>

<body>
<section layout:fragment="content">

    <!-- Botones de navegación -->
    <div class="d-flex justify-content-end mt-3 me-3 mb-3">
        <a th:href="@{/backoffice/proyectos}" class="btn btn-success me-2">Proyectos</a>
        <a th:href="@{/backoffice/libros}" class="btn btn-info me-2">Libros</a>
        <a th:href="@{/backoffice/mapa-libros-v2}" class="btn btn-warning">Mundo Honour U</a>
    </div>

    <!-- Imagen centrada -->
    <div class="text-center my-4">
        <img th:src="@{/img/imagenLibro.jpg}" alt="Encabezado visual" style="max-width: 20%; height: auto;" />
    </div>

    <div class="container">
        <h2 class="mt-4 text-center text-light">Libros Existentes</h2>

        <div class="card shadow-sm mt-3 p-3" style="background-color: #ffffff; border: none;">
            <div class="card-body">

                <table class="table table-bordered table-hover align-middle tabla-fondo">
                    <thead class="table-light">
                    <tr>
                        <th>Título</th>
                        <th>Formato</th>
                        <th>Copias</th>
                        <th>Páginas</th>
                        <th>Proyecto</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="libro : ${libros}">
                        <td th:text="${libro.tituloLibro}"></td>
                        <td th:text="${libro.formato}"></td>
                        <td th:text="${libro.copias}"></td>
                        <td th:text="${libro.paginas}"></td>
                        <td th:text="${libro.proyecto != null ? libro.proyecto.nombreProyecto : 'Sin proyecto'}"></td>
                        <td>
                            <div class="d-flex flex-wrap gap-1">
                                <a th:href="@{/backoffice/libros/{id}/edit(id=${libro.libroId})}" class="btn btn-warning btn-sm">Editar</a>
                                <span th:if="${libro.destinatario != null}">
                                    <a th:href="@{/backoffice/destinatarios/{id}/edit(id=${libro.destinatario.destinatarioId})}" class="btn btn-info btn-sm">Editar Destinatario</a>
                                </span>
                                <span th:if="${libro.destinatario == null}">
                                    <a th:href="@{/backoffice/destinatarios(libroId=${libro.libroId})}" class="btn btn-primary btn-sm">Crear Destinatario</a>
                                </span>
                                <a th:href="@{/backoffice/libros/{id}/delete(id=${libro.libroId})}" class="btn btn-danger btn-sm">Eliminar</a>
                            </div>
                        </td>

                    </tr>
                    </tbody>
                </table>

            </div>
        </div>
    </div>

</section>

<!-- Estilos específicos -->
<style>
    body {
        background-color: #1a237e;
        color: white;
        font-family: Arial, sans-serif;
    }

    .card {
        background-color: #ce93d8;
        color: #000;
    }

    .tabla-fondo th,
    .tabla-fondo td {
        background-color: #e6e6fa !important;
        color: black;
    }

    h1, h2 {
        color: var(--color-acento, #ce93d8);
        font-weight: bold;
    }

    .table th {
        background-color: #d1c4e9 !important;
    }

    .btn {
        font-weight: 600;
    }
</style>

</body>
</html>
